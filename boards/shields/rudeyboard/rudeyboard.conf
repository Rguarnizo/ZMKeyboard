# ================================
#   ZMK CONFIG — NICE!NANO V2
#   BLE + RTT DEBUG (NO USB)
# ================================

# --- Modo wireless (Nice!Nano es BLE only)
CONFIG_ZMK_USB=n
CONFIG_USB_DEVICE_STACK=n
CONFIG_USB=n
CONFIG_SERIAL=n
CONFIG_UART_CONSOLE=n
CONFIG_UART_INTERRUPT_DRIVEN=n

# --- BLE
CONFIG_BT=y
CONFIG_ZMK_BLE=y
CONFIG_ZMK_SPLIT=n

# --- Logging general
CONFIG_LOG=y                 # Habilitar logging
CONFIG_LOG_MODE_DEFERRED=y   # Mejora rendimiento
CONFIG_ZMK_LOG_LEVEL_DBG=y   # Log level: DEBUG

# --- SEGGER RTT (debug seguro, sin USB)
CONFIG_USE_SEGGER_RTT=y
CONFIG_SEGGER_RTT_MAX_NUM_UP_BUFFERS=3
CONFIG_SEGGER_RTT_MAX_NUM_DOWN_BUFFERS=3

# Permite logs vía RTT (sin tocar USB)
CONFIG_LOG_BACKEND_RTT=y

# --- Desactivar cualquier backend USB o serial innecesario
CONFIG_LOG_BACKEND_UART=n
CONFIG_LOG_BACKEND_USB=n

# --- Optimización opcional para teclado BLE
CONFIG_ZMK_SLEEP=y
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=2048

# --- Matriz (se gestiona desde DTS)
# No se configura aquí nada para filas/columnas
# todo va en el .dts del shield.

# --- Evita warnings de Zephyr
CONFIG_USB_CDC_ACM=n
CONFIG_USB_HID_DEVICE=n
CONFIG_USB_DEVICE_INIT_PRIORITY=0